Adopted from [libvterm](https://www.leonerd.org.uk/code/libvterm/)
